<div class="container">
     <legend class="text-center" style="margin-top:40px">개인 정보 변경하기</legend>
  	<hr>
	<div class="row">
      
      <!-- edit form column -->
      <div class="col-md-9 personal-info">
        <div class="alert alert-info alert-dismissable">
          <a class="panel-close close" data-dismiss="alert">×</a> 
          <i class="fa fa-coffee"></i>
          <strong>이메일</strong>을 변경하실 경우 문의 사항을 남겨주세요.
        </div>
        <h3>Personal info</h3>
        
        <form class="form-horizontal" role="form">
          <div class="form-group">
            <label class="col-lg-3 control-label">이메일:</label>
            <div class="col-lg-8">
              <input class="form-control" type="email" id="userEmailForm" readonly>
            </div>
          </div>

          <div class="form-group">
            <label class="col-lg-3 control-label">현재 비밀번호:</label>
            <div class="col-lg-8">
              <input class="form-control" type="password" id="userPassword">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">새 비밀번호:</label>
            <div class="col-lg-8">
              <input class="form-control" type="password" id="changePassword1">
            </div>
          </div>
          <div class="form-group">
            <label class="col-lg-3 control-label">새 비밀번호 확인:</label>
            <div class="col-lg-8">
              <input class="form-control" type="password" id="changePassword2">
            </div>
          </div>
          <div class="form-group">
            <div class="col-md-12">
              <input type="button" class="btn btn-primary" id="sbmBtn" value="변경하기">
            </div>
          </div>
        </form>
      </div>
  </div>
</div>
<hr>

<script>
$('#userEmailForm').attr("value",userEmail);


$('#sbmBtn').click(function(){
	
	console.log($('#userPassword').val());
	console.log($('#changePassword2').val());
	
	
	console.log($('#changePassword2').val().length)
	if($('#changePassword2').val() != $('#changePassword1').val()){
		alert('변경할 비밀번호가 서로 일치하지 않습니다.')
	}
	if($('#changePassword2').val().length < 6){
		alert('비밀번호를 6글자 이상으로 설정해주세요.')
	}else{
		
		$.post(serverAddr+'/app/member/changeUserPassword',{
			existingUserPassword : $('#userPassword').val(),
			newUserPassword : $('#changePassword2').val()
		},function(result){
			
			if(result.state == 'passwordMatchingFail'){
				alert('현재 비밀번호가 일치하지 않습니다.')
			}else if(result.state == 'success'){
				alert('비밀번호 변경이 완료 됐습니다.')
			}else{
				alert('잠시 후 다시 요청해주세요.')
			}
		})	
	}	
})
</script>